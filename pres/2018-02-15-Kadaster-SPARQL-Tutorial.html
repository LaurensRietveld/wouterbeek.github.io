<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Kadaster SPARQL Tutorial</title>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
      }
      });
    </script>
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <meta name="description" content="Kadaster SPARQL Tutorial">
    <meta name="author" content="Wouter Beek and Jesse Bakker">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css" id="theme">
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <style>
      .reveal h1 , .reveal  h2 , .reveal  h3 , .reveal h4 , .reveal h5 , .reveal h6 { color: black; }
      * { color: black; }
      img {
      border: 0px !important;
      box-shadow: 0 0 0 !important;
      }
      td a img {
      transition: unset !important;
      max-height: 40px !important;
      margin: 5px 0px 5px 0px !important;
      padding: 0px !important;
      }
      .cody {
      font-family: monospace !important;
      font-size: 14pt !important;
      }
      .left {
      left:-8.33%;
      text-align: left;
      float: left;
      width:50%;
      z-index:-10;
      }
      .right {
      left:31.25%;
      top: 75px;
      float: right;
      text-align: left;
      z-index:-10;
      width:50%;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <h2>Kadaster SPARQL Tutorial</h2>
          <hr>
          <p>Wouter Beek <a href="mailto:wouter@triply.cc">wouter@triply.cc</a></p>
          <p>Laurens Rietveld <a href="mailto:laurens@triply.cc">laurens@triply.cc</a></p>
          <p>15 Februari, 2018</p>
          <img src="../img/kadaster.jpg" height="200">
        </section>
        <section>
          <section>
            <h1>Wat is Linked Data?</h1>
          </section>
          <section>
            <h2>World Wide Web: Web of Documents 🖺</h2>
            <a href="../img/before_sw_conversion.png">
              <img height="550" src="../img/before_sw_conversion.png">
            </a>
          </section>
          <section>
            <h2>Linked Data: Web of data 🖼</h2>
            <a href="../img/after_sw_conversion.png">
              <img height="550" src="../img/after_sw_conversion.png">
            </a>
          </section>
          <section>
            <h2>Linked Data 5 sterren</h2>
            <a href="http://5stardata.info">
              <img src="../img/5star.png">
            </a>
            <small>Source: Tim Berners-Lee
              (<a href="http://5stardata.info">http://5stardata.info</a>)</small>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel I: De eerste SPARQL vraag</h1>
          </section>
          <section>
            <h2><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=De+eerste+SPARQL+vraag&headers=%7B%7D&outputFormat=table">De eerste SPARQL vraag</a></h2>
            <pre><code data-trim data-noescape>
select ?s ?p ?o {
  ?s ?p ?o
}
limit 5
            </code></pre>
            <p>
              <small>
                Onderdelen:<br>
                projectie: <code>select ?s ?p ?o</code><br>
                patroon: <code>?s ?p ?o .</code><br>
                limiet: <code>limit 5</code>
              </small>
            </p>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=select+%3Fo+%3Fp+%3Fs+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Verander+de+projectie&headers=%7B%7D&outputFormat=table">Verander de projectie</a></h2>
            <pre><code data-trim data-noescape>
select <mark>?o ?p ?s</mark> {
  ?s ?p ?o
}
limit 5
            </code></pre>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+10%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Verander+de+limiet&headers=%7B%7D&outputFormat=table">Verander de limiet</a></h2>
            <pre><code data-trim data-noescape>
select ?s ?p ?o {
  ?s ?p ?o
}
limit <mark>10</mark>
            </code></pre>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5%0Aoffset+5&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+een+offset+toe&headers=%7B%7D&outputFormat=table">Voeg een offset toe</a></h2>
            <pre><code data-trim data-noescape>
select ?s ?p ?o {
  ?s ?p ?o
}
limit 5
<mark>offset 5</mark>
            </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel II: Naamgeving &amp; Ambiguïteit</h1>
          </section>
          <section>
            <h2>Alles heeft een naam</h2>
            <img height="500px" src="../img/naming.jpg">
          </section>
          <section>
            <h2>Maar soms hebben 2 verschillende dingen toch dezelfde
              naam…</h2>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=select+%3Fs+%7B%0A++%3Fs+%3Fp+%22De+Brug%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23string%3E+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=🌉+Wat+is+‘De+Brug’%3F&headers=%7B%7D&outputFormat=table">Wat is ‘De Brug’? 🌉</a></h2>
            <pre><code data-trim data-noescape>select ?s {
  ?s ?p "De Brug"^^&lt;http://www.w3.org/2001/XMLSchema#string&gt; .
}
limit 100
            </code></pre>
            <p>
              <small>
                <code>"De
                  Brug"^^&lt;http://www.w3.org/2001/XMLSchema#string&gt;</code>
                  is een <b>literal</b>.
              </small>
            </p>
            <p>
              <small>
                <code>&lt;http://www.w3.org/2001/XMLSchema#string&gt;</code>
                is het <b>datatype</b>.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fs+%7B%0A++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=🌉+Wat+is+‘De+Brug’%3F&headers=%7B%7D&outputFormat=table">Wat is ‘De Brug’? 🌉</a></h2>
            <pre><code data-trim data-noescape>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?s {
  ?s ?p "De Brug"^^xsd:string .
}
limit 100
            </code></pre>
            <p>
              <small>
                URI kunnen worden afgekort met <code>prefix</code>
                declaraties.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fs+%7B%0A++%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+.%0A++%7D+union+%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%40nl+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Nog+meer+dingen+die+%E2%80%98‘De+Brug’%E2%80%99+heten%E2%80%A6&headers=%7B%7D&outputFormat=table">Nog meer dingen die ‘De Brug’ heten…</a></h2>
            <pre><code data-trim data-noescape>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?s {
  {
    ?s ?p "De Brug"^^xsd:string .
  } union {
    ?s ?p "De Brug"@nl .
  }
}
limit 100
            </code></pre>
            <p>
              <small>
                <code>"De Brug"@nl</code> is een <b>language-tagged
                string</b>.  Dit betekent dat <code>"De Brug"</code>
                geïnterpreteerd moet worden in het Nederlands
                (<code>nl</code>).
              </small>
            </p>
            <p>
              <small>
                <code>{ A } union { B }</code> geeft aan dat de de
                resultaten van query <code>A</code> én de resultaten
                van query <code>B</code> willen.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+distinct+%3Fklasse+%7B%0A++%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+%3B+a+%3Fklasse+.%0A++%7D+union+%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%40nl+%3B+a+%3Fklasse+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Wat+iets+is+kunnen+we+zien+aan+de+klasse&headers=%7B%7D&outputFormat=table">Wat iets is kunnen we zien aan de <i>klasse</i></a></h2>
            <pre><code data-trim data-noescape>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select distinct ?klasse {
  {
    ?s ?p "De Brug"^^xsd:string ; a ?klasse .
  } union {
    ?s ?p "De Brug"@nl ; a ?klasse .
  }
}
limit 100
            </code></pre>
            <p>
              <small>
                ‘<code>a</code>’ duidt de relatie aan tussen een
                instantie en een klasse.  ‘<code>a</code>’ is een
                afkorting voor <code>rdf:type</code>, wat een
                afkorting is
                voor <code>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</code>.
              </small>
            </p>
            <p>
              <small>
                <code>distinct</code> laat alleen unieke resultaten zien.
              </small>
            </p>
            <p>
              <small>
                ‘<code>;</code>’ is een afkorting die de subject term herhaalt.
              </small>
            </p>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel III: Linked Geodata</h1>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=%F0%9F%8F%99+Wat+is+Apeldoorn%3F&headers=%7B%7D&outputFormat=table">🏙 Wat is Apeldoorn?</a></h2>
            <pre><code data-trim data-noescape>
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?s {
  ?s rdfs:label "Apeldoorn"@nl .
}
limit 100
            </code></pre>
            <p>
              <small>
                <code>rdfs:label</code> geeft een menselijk
                interpreteerbare naam van een ding.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%3Flabel+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B+a+%3Fklasse+.%0A++%3Fklasse+rdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ook+klasses+hebben+een+label&headers=%7B%7D&outputFormat=table">Ook klasses hebben een label</a></h2>
            <pre><code data-trim data-noescape>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
select ?s ?label {
  ?s rdfs:label "Apeldoorn"@nl ; a ?klasse .
  ?klasse rdfs:label ?label .
}
limit 100</code></pre>
            <p>
              <small>
                Merk op dat we <code>?klasse</code> niet gebruiken in
                de projectie (zie volgende query).
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%3Flabel+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B+a%2Frdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Wat+we+niet+gebruiken+mogen+we+overslaan&headers=%7B%7D&outputFormat=table">Wat we niet gebruiken mogen we overslaan</a></h2>
            <pre><code data-trim data-noescape>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
select ?s ?label {
  ?s rdfs:label "Apeldoorn"@nl ; a/rdfs:label ?label .
}
limit 100
            </code></pre>
            <p>
              <small>
                We slaan <code>?klasse</code> uit de vorige query over.
              </small>
            </p>
            <p>
              <small>
                <code>X/Y</code> is een <b>property path</b>.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++%3Finstantie+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A+++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fwkt+%3B%0A+++++++++++++a%2Frdfs%3Alabel+%3FwktLabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ambigu%C3%AFteit+%2B+geografie&headers=%7B%7D&outputFormat=table">Ambiguïteit + geografie</a></h2>
            <pre><code data-trim data-noescape>
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wkt ?wktLabel {
  ?s rdfs:label "Apeldoorn"@nl ;
     geo:hasGeometry/geo:asWKT ?wkt ;
     a/rdfs:label ?wktLabel .
}
limit 100
            </code></pre>
            <p>
              <small>
                <code>geo:hasGeometry/geo:asWKT</code> geeft de
                Well-Known Text (WKT) representatie van een geometrie.
              </small>
            </p>
            <p>
              <small>
                Merk op dat we verschillende vocabulaires door elkaar
                heen gebruiken: <code>rdfs</code> van W3C
                en <code>geo</code> van OGC.
              </small>
            </p>
          </section>
          <section>
            <h2>🏙 Welke Apeldoorn bedoel je?</h2>
            <h2><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++%3Finstantie+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A+++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fwkt+%3B%0A+++++++++++++a+brt%3ARegistratiefGebied+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ik+bedoel+het+registratief+gebied&headers=%7B%7D&outputFormat=leaflet">Ik
            bedoel het registratief gebied</a></h2>
            <pre><code data-trim data-noescape>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wkt ?wktLabel {
  ?instantie rdfs:label "Apeldoorn"@nl ;
             geo:hasGeometry/geo:asWKT ?wkt ;
             a brt:RegistratiefGebied .
}
limit 100
            </code></pre>
          </section>
        </section>
        
        <section>
          <section>
            <h1>Deel IV: De BAG bevragen met SPARQL</h1>
          </section>
          
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aselect+%3FopenbareRuimte+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+openbare+ruimte&headers=%7B%7D&outputFormat=table">BAG openbare ruimte</a></h2>
            <pre><code data-trim data-noescape>
prefix &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat"
}
limit 100
            </code></pre>
            <p>Openbare ruimtes die ‘Hofstraat’ heten.</p>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+openbare+ruimte+%2B+woonplaats&headers=%7B%7D&outputFormat=table">BAG openbare ruimte + woonplaats</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
}
limit 100
            </code></pre>
            <p>Openbare ruimtes die ‘Hofstraat’ heten én hun bijbehorende woonplaats.</p>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%3Flabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Menselijk+leesbare+labels&headers=%7B%7D&outputFormat=table">Menselijk leesbare labels</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte ?woonplaats ?label {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats bag:naamWoonplaats ?label .
}
limit 100
            </code></pre>
            <p>
              <small>
                Weer ambiguïteit: er zijn heel veel openbare ruimtes die ‘Hofstraat’ heten.
              </small>
            </p>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Maak+het+patroon+specifieker&headers=%7B%7D&outputFormat=table">Maak het patroon specifieker</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label <mark>"Apeldoorn"@nl</mark> .
}
limit 100
            </code></pre>
            <p>De Hofstraat in <i>Apeldoorn</i>.</p>
            <small>(Merk op: er zijn 2 openbare ruimtes; hierover later meer.)</small>
          </section>
          
          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fnummeraanduiding+%3FopenbareRuimte+%3Fnummeraanduiding+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+nummeraanduiding+toe&headers=%7B%7D&outputFormat=table">Voeg nummeraanduiding toe</a></h3>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?nummeraanduiding ?openbareRuimte {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats<mark>/rdfs:label</mark> "Apeldoorn"@nl .
<mark>  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:huisnummer 110 .</mark>
}
limit 100
            </code></pre>
            <p>
              <small>
                Met property path notatie (<code>/</code>) slaan we de
                niet gebruikte <code>?woonplaats</code> over.
              </small>
            </p>
          </section>
          
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+.%0A++%3Fpand+bag%3AgeometriePand%2Fgeo%3AasWKT+%3Fwkt+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+verblijfsobject+en+pand+toe&headers=%7B%7D&outputFormat=leaflet">Voeg verblijfsobject en pand toe</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select <mark>?wkt</mark> {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl .
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:huisnummer 110 .
<mark>  ?verblijfsobject bag:hoofdadres ?nummeraanduiding ;
                   bag:pandrelatering ?pand .
  ?pand bag:geometriePand/geo:asWKT ?wkt .</mark>
}
limit 100
            </code></pre>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+%3FwktLabel+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fwkt+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Maak+patroon+generieker&headers=%7B%7D&outputFormat=leaflet">Maak patroon generieker</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wkt <mark>?wktLabel</mark> {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl .
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:huisnummer <mark>?wktLabel</mark> .
  ?verblijfsobject bag:hoofdadres ?nummeraanduiding ;
                   bag:pandrelatering<mark>/</mark>bag:geometriePand/geo:asWKT ?wkt .
}
limit 100
            </code></pre>
            <p>
              <small>
                Waarom zien we sommige panden dubbel?
              </small>
            </p>
          </section>
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FwktVerblijfsobject+%3FwktVerblijfsobjectColor+%3FwktVerblijfsobjectLabel+%3FwktPand+%3FwktPandLabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Apostcode+%3Fpostcode+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+%3Fhuisnummer+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3FwktVerblijfsobject+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+%3B%0A+++++++++++++++++++a%2Frdfs%3Alabel+%3Flabel+.%0A++%3Fpand+bag%3AgeometriePand%2Fgeo%3AasWKT+%3FwktPand+.%0A++bind+(concat('Hofstraat+'%2Cstr(%3Fhuisnummer))+as+%3FwktPandLabel)%0A++bind+(concat(%3FwktPandLabel%2C'+'%2Cstr(%3Fpostcode)%2C'%3Cbr%3E'%2Cstr(%3Flabel))+as+%3FwktVerblijfsobjectLabel)%0A++bind+(%22red%22+as+%3FwktVerblijfsobjectColor)%0A%7D%0Alimit+1000%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=%C3%89%C3%A9n+pand+kan+meerdere+verblijfsobjecten+hebben&headers=%7B%7D&outputFormat=leaflet">Één pand kan meerdere verblijfsobjecten hebben</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wktVerblijfsobject ?wktVerblijfsobjectColor ?wktVerblijfsobjectLabel ?wktPand ?wktPandLabel {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl .
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:postcode ?postcode ;
                    bag:huisnummer ?huisnummer .
  ?verblijfsobject bag:hoofdadres ?nummeraanduiding ;
                   geo:hasGeometry/geo:asWKT ?wktVerblijfsobject ;
                   bag:pandrelatering ?pand ;
                   a/rdfs:label ?label .
  ?pand bag:geometriePand/geo:asWKT ?wktPand .
  bind (concat('Hofstraat ',str(?huisnummer)) as ?wktPandLabel)
  bind (concat(?wktPandLabel,' ',str(?postcode),'<br>',str(?label)) as ?wktVerblijfsobjectLabel)
  bind ("red" as ?wktVerblijfsobjectColor)
}
limit 1000
            </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel V: Federatie</h1>
          </section>
          <section>
            <h2>Who uses Linked Data? (1/2)</h2>
            <center>
              <blockquote class="twitter-tweet" data-lang="en">
                <p lang="en" dir="ltr">
                  Where
                  is <a href="https://twitter.com/hashtag/semweb?src=hash&amp;ref_src=twsrc%5Etfw">#semweb</a>
                  / <a href="https://twitter.com/hashtag/linkeddata?src=hash&amp;ref_src=twsrc%5Etfw">#linkeddata</a>
                  used? Challenged at work today and hoping to make a
                  point with one tweet.
                </p>
                &mdash; Tim Lebo
                (@timrdf) <a href="https://twitter.com/timrdf/status/925470421566320640?ref_src=twsrc%5Etfw">October
                  31, 2017</a>
              </blockquote>
              <blockquote class="twitter-tweet" data-lang="en">
                <p lang="en" dir="ltr">
                  Facebook, Google, Bing, BBC, NYT, Renault,
                  Accenture, Deloitte, Wallmart, Getty, NXP,
                  Europeana, Springer, Elsevier, ..only
                  140chars... <a href="https://t.co/oeMRQyDLLt">https://t.co/oeMRQyDLLt</a>
                </p>
                &mdash; Frank van Harmelen
                (@FrankVanHarmele) <a href="https://twitter.com/FrankVanHarmele/status/925475076081901569?ref_src=twsrc%5Etfw">October
                  31, 2017</a>
              </blockquote>
            </center>
          </section>
          <section>
            <h2>Who uses Linked Data? (2/2)</h2>
            <p>Schema.org:<p>
            <ul>
              <li>20M web sites</li>
              <li>35% of pages in search index</li>
              <li>50% of US/EU eCommerce emails</li>
              <li>800B small graphs of ~25 statements</li>
            </ul>
            <small>Source: A.W.Moore &amp; R.V. Gua, Google
              Research</small>
          </section>
          <section>
            <h3>LOD Cloud: 2014</h3>
            <a href="../img/lod_cloud_2014.png">
              <img src="../img/lod_cloud_2014.png" height="450">
            </a>
            <p>Er zijn heel veel andere Linked Datasets op het web.</p>
          </section>
          <section>
            <h3>LOD Cloud: 2017</h3>
            <a href="../img/lod_cloud_2017.png">
              <img src="../img/lod_cloud_2017.png" height="450">
            </a>
            <p>We kunnen al deze Datasets bevragen met SPARQL.</p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+dbo%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0Aprefix+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++bind+(%22Amsterdam%22+as+%3Fnaam)%0A++bind+(strdt(%3Fnaam%2Cxsd%3Astring)+as+%3Fx)%0A++%3Fplaats1+rdfs%3Alabel+%3Fx+%3B+brt%3AisBAGwoonplaats+true+%3B+geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fwkt+.%0A++bind+(strlang(%3Fnaam%2C%22nl%22)+as+%3Fy)%0A++service+%3Chttps%3A%2F%2Fdbpedia.org%2Fsparql%3E+%7B%0A++++%3Fplaats2+rdfs%3Alabel+%3Fy+%3B+foaf%3Adepiction+%3Fvlag+.%0A++%7D%0A++bind+(concat('%3Ch2%3E'%2C%3Fnaam%2C'%3C%2Fh2%3E'%2Cif(bound(%3Fvlag)%2Cconcat('%3Cimg+src%3D%22'%2Cstr(%3Fvlag)%2C'%22+style%3D%22max-width%3A+150px%3B%22%3E')%2C'')%2C'%3Cp%3EExterne+representatie%3A+%3Ca+href%3D%22'%2Cstr(%3Fplaats2)%2C'%22%3E%5BDBpedia%5D%3C%2Fa%3E%3C%2Fp%3E')+as+%3FwktLabel)%0A%7D%0Alimit+1%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fapi.krr.triply.cc%2Fdatasets%2FKadaster%2Fgeosoup2%2Fservices%2Fgeosoup%2Fsparql&requestMethod=POST&tabTitle=%F0%9F%95%B8+BRT%2FBAG+gemeente+%E2%86%92+DBpedia&headers=%7B%7D&outputFormat=leaflet">BRT/BAG gemeente → DBpedia 🕸</a></h2>
            <pre><code data-trim data-noescape>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?wkt ?wktLabel {
  ?plaats1 rdfs:label "Swalmen"^^xsd:string ;
           brt:isBAGwoonplaats true ;
           geo:hasGeometry/geo:asWKT ?wkt .
  <mark>service &lt;https://dbpedia.org/sparql&gt; {</mark>
    ?plaats2 rdfs:label "Swalmen"@nl ; foaf:depiction ?vlag . }
  <mark>}</mark>
}
limit 1
            </code></pre>
            <p>
              <small>
                <code>service &lt;URL&gt; { A }</code> betekent: voer
                query <code>A</code> uit op SPARQL
                endpoint <code>URL</code>, en voeg de resultaten
                samen.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+dbo%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0Aprefix+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++bind+(%22Apeldoorn%22+as+%3Fnaam)%0A++bind+(strdt(%3Fnaam%2Cxsd%3Astring)+as+%3Fx)%0A++%3Fplaats1+rdfs%3Alabel+%3Fx+%3B+brt%3AisBAGwoonplaats+true+%3B+geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fwkt+.%0A++bind+(strlang(%3Fnaam%2C%22nl%22)+as+%3Fy)%0A++service+%3Chttps%3A%2F%2Fdbpedia.org%2Fsparql%3E+%7B%0A++++%3Fplaats2+rdfs%3Alabel+%3Fy+.%0A++++optional+%7B+%3Fplaats2+foaf%3Adepiction+%3Fvlag+.+%7D%0A++%7D%0A++bind+(concat('%3Ch2%3E'%2C%3Fnaam%2C'%3C%2Fh2%3E'%2Cif(bound(%3Fvlag)%2Cconcat('%3Cimg+src%3D%22'%2Cstr(%3Fvlag)%2C'%22+style%3D%22max-width%3A+150px%3B%22%3E')%2C'')%2C'%3Cp%3EExterne+representatie%3A+%3Ca+href%3D%22'%2Cstr(%3Fplaats2)%2C'%22%3E%5BDBpedia%5D%3C%2Fa%3E%3C%2Fp%3E')+as+%3FwktLabel)%0A%7D%0Alimit+1%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fapi.krr.triply.cc%2Fdatasets%2FKadaster%2Fgeosoup2%2Fservices%2Fgeosoup%2Fsparql&requestMethod=POST&tabTitle=Apeldoorn+heeft+geen+vlag&headers=%7B%7D&outputFormat=leaflet">Apeldoorn heeft geen vlag</a></h2>
            <pre><code data-trim data-noescape>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?wkt ?wktLabel {
  ?plaats1 rdfs:label "Apeldoorn"^^xsd:string ;
           brt:isBAGwoonplaats true ;
           geo:hasGeometry/geo:asWKT ?wkt .
  service &lt;https://dbpedia.org/sparql&gt; {
    ?plaats2 rdfs:label "Apeldoorn"@nl .
    <mark>optional { ?plaats2 foaf:depiction ?vlag . }</mark>
  }
}
limit 1
            </code></pre>
            <p>
              <small>
                <code>optional { A }</code> betekent:
                voer <code>A</code> uit, indien mogelijk.
              </small>
            </p>
            <p>
              <small>
                Met name nuttig voor ontbrekende waardes (data op het
                web is vaak onvolledig).
              </small>
            </p>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel VI:<br>Aggregatie</h1>
          </section>
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aselect+%3Fwkt+%3FwktLabel+%7B%0A++%3Fverblijfsobject+bag%3Ahoofdadres%2Fbag%3AbijbehorendeOpenbareRuimte%2Fbag%3AbijbehorendeWoonplaats%2Fbag%3AnaamWoonplaats+%22Apeldoorn%22+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+.%0A++%3Fpand+bag%3AoorspronkelijkBouwjaar+%3FwktLabel+%3B%0A++++++++bag%3AgeometriePand%2Fgeo%3AasWKT+%3Fwkt+.%0A%7D%0Aorder+by+asc(%3FwktLabel)%0Alimit+50%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Oudste+pand+in+Apeldoorn+👵👴&headers=%7B%7D&outputFormat=leaflet">Oudste pand in Apeldoorn 👵👴</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: <http://bag.basisregistraties.overheid.nl/def/bag#>
prefix geo: <http://www.opengis.net/ont/geosparql#>
select ?wkt ?wktLabel {
  ?verblijfsobject bag:hoofdadres/bag:bijbehorendeOpenbareRuimte/bag:bijbehorendeWoonplaats/bag:naamWoonplaats "Apeldoorn" ;
                   bag:pandrelatering ?pand .
  ?pand bag:oorspronkelijkBouwjaar ?wktLabel ;
        bag:geometriePand/geo:asWKT ?wkt .
}
order by asc(?wktLabel)
limit 50
            </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h1>Deel VII: Versies in de BAG</h1>
          </section>
            
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Zijn+er+meerdere+Apeldoorns%3F&headers=%7B%7D&outputFormat=table">Zijn er meerdere Apeldoorns?</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label "Apeldoorn"@nl .
}
limit 100
            </code></pre>
            <small>
              <table>
                <tr><th>openbareRuimte</th><th>woonplaats</th></tr>
                <tr><td>openbare-ruimte:0200300022471548</td><td>woonplaats:2247</td></tr>
                <tr><td>openbare-ruimte:0200300022471548</td><td>woonplaats:3560</td></tr>
              </table>
            </small>
          </section>
            
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwoonplaats+%3Fstatus+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A++++++++++++++bag%3Astatus+%3Fstatus+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+status&headers=%7B%7D&outputFormat=leaflet">BAG status</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?woonplaats <mark>?status</mark> {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label "Apeldoorn"@nl <mark>;
              bag:status ?status .</mark>
}
limit 100
            </code></pre>
            <small>
              <table>
                <tr><th>woonplaats</th><th>status</th></tr>
                <tr><td>woonplaats:2247</td><td>begrip:WoonplaatsAangewezen</td></tr>
	        <tr><td>woonplaats:2247</td><td>begrip:WoonplaatsIngetrokken</td></tr>
                <tr><td>woonplaats:3560</td><td>begrip:WoonplaatsAangewezen</td></tr>
              </table>
            </small>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Alleen+huidige+woonplaatsen&headers=%7B%7D&outputFormat=table">Alleen huidige woonplaatsen</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label "Apeldoorn"@nl .
  <mark>filter not exists {
    ?woonplaats bag:status begrip:WoonplaatsIngetrokken .
  }</mark>
}
limit 100
            </code></pre>
            <p>Nu hebben we de juiste Apeldoorn.</p>
          </section>

          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%3Fbegin+%3Feind+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++graph+%3Fvoorkomen+%7B%0A++++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+.%0A++%7D%0A++%3Fverblijfsobject+bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fwkt+.%0A++%3Fvoorkomen+bag%3AbeginGeldigheid+%3Fbegin+.%0A++optional+%7B%0A++++%3Fvoorkomen+bag%3AeindGeldigheid+%3Feind+.%0A++%7D%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+voorkomen&headers=%7B%7D&outputFormat=table">BAG voorkomen</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wkt ?begin ?eind {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label "Apeldoorn"@nl .
  filter not exists {
    ?woonplaats bag:status begrip:WoonplaatsIngetrokken .
  }
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:huisnummer 110 .
  <mark>graph ?voorkomen {
    ?verblijfsobject bag:hoofdadres ?nummeraanduiding .
  }
  ?verblijfsobject bag:pandrelatering/bag:geometriePand/geo:asWKT ?wkt .
  ?voorkomen bag:beginGeldigheid ?begin .
  optional {
    ?voorkomen bag:eindGeldigheid ?eind .
  }</mark>
}
limit 100
            </code></pre>
            <p>
              <small>
                <code>graph <URI> { A }</code> betekent: voer
                query <code>A</code> uit binnen
                deelgraaf <code>URI</code>.
              </small>
            </p>
          </section>
          <section>
            <h2><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwkt+%3Fbegin+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++graph+%3Fvoorkomen+%7B%0A++++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+.%0A++%7D%0A++%3Fverblijfsobject+bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fwkt+.%0A++%3Fvoorkomen+bag%3AbeginGeldigheid+%3Fbegin+.%0A++filter+not+exists+%7B%0A++++%3Fvoorkomen+bag%3AeindGeldigheid+%3Feind+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+voorkomen&headers=%7B%7D&outputFormat=table">Huidig voorkomen</a></h2>
            <pre><code data-trim data-noescape>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?wkt ?begin {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat" ;
                  bag:bijbehorendeWoonplaats ?woonplaats .
  ?woonplaats rdfs:label "Apeldoorn"@nl .
  filter not exists {
    ?woonplaats bag:status begrip:WoonplaatsIngetrokken .
  }
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte ;
                    bag:huisnummer 110 .
  graph ?voorkomen {
    ?verblijfsobject bag:hoofdadres ?nummeraanduiding .
  }
  ?verblijfsobject bag:pandrelatering/bag:geometriePand/geo:asWKT ?wkt .
  ?voorkomen bag:beginGeldigheid ?begin .
  <mark>filter not exists</mark> {
    ?voorkomen bag:eindGeldigheid ?eind .
  }
}
limit 100
            </code></pre>
          </section>
        </section>

        <section>
          <h2>Kadaster SPARQL</h2>
          <p>
            Productie endpoint:
            <br>
            <a href="https://data.pdok.nl/sparql"><code>https://data.pdok.nl/sparql</code></a>
          </p>
          <p>
            Data stories:
            <br>
            <a href="https://data.labs.pdok.nl/stories/"><code>https://data.labs.pdok.nl/stories/</code></a>
          </p>
          <hr>
          <p>Dank voor het meedoen!</p>
          <img src="../img/kadaster.jpg" height="200">
        </section>

      </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,
      transition: 'slide', // none/fade/slide/convex/concave/zoom
      // Optional reveal.js plugins
      dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/notes/notes.js', async: true }
      ]
      });
    </script>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8">
    </script>
    <script>
      window.twttr = (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
      if (d.getElementById(id)) return t;
      js = d.createElement(s);
      js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
      t._e = [];
      t.ready = function(f) {
      t._e.push(f);
      };
      return t;
      }(document, "script", "twitter-wjs"));
    </script>
  </body>
</html>
