<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Linked Gemeentegeschiedenis v0.1</title>
<!-- 2017-01-28 za 00:32 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Wouter Beek" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Linked Gemeentegeschiedenis v0.1</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. IRI strategy</a>
<ul>
<li><a href="#sec-1-1">1.1. Common IRI prefix</a></li>
<li><a href="#sec-1-2">1.2. IRI strategy: vocabulary</a></li>
<li><a href="#sec-1-3">1.3. IRI strategy: instances</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Properties</a>
<ul>
<li><a href="#sec-2-1">2.1. <code>amsterdamse_code</code></a></li>
<li><a href="#sec-2-2">2.2. <code>cbs-def:gemeenteCode</code></a></li>
<li><a href="#sec-2-3">2.3. <code>geo:geometry</code></a></li>
<li><a href="#sec-2-4">2.4. <code>gem-def:validSince</code> &amp; <code>gem-def:validUntil</code></a></li>
<li><a href="#sec-2-5">2.5. <code>type</code> → <code>rdf:type</code></a></li>
<li><a href="#sec-2-6">2.6. <code>name</code> → <code>rdfs:label</code></a></li>
</ul>
</li>
<li><a href="#sec-3">3. Example</a></li>
<li><a href="#sec-4">4. TO-DO list</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> IRI strategy</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Common IRI prefix</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The website currently runs on <a href="http://www.gemeentegeschiedenis.nl">http://www.gemeentegeschiedenis.nl</a>, but
the use of HTTPS is rising and the <code>www</code> subdomain is being used less.
With an eye on long-term IRI stability I'm using IRI prefix
<code>https://gemeentegeschiedenis.nl</code>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> IRI strategy: vocabulary</h3>
<div class="outline-text-3" id="text-1-2">
<p>
For classes, properties and value lists I want to mint IRIs according
to the following pattern:
</p>

<div class="org-src-container">

<pre class="src src-iri">https://gemeentegeschiedenis.nl/def/validSince
</pre>
</div>

<p>
The <code>def</code> segment denotes that this identifies a vocabulary resource.
The <code>validSince</code> segment denotes a property: starting with a lowercase
letter and using CamelCase notation for subsequent words.  For classes
this last segment starts with an uppercase letter, also using
CamelCase.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> IRI strategy: instances</h3>
<div class="outline-text-3" id="text-1-3">
<p>
I want to use the value of the <code>cbscode</code> property to mint the resource
IRI according to the following pattern:
</p>

<div class="org-src-container">

<pre class="src src-iri">https://gemeentegeschiedenis.nl/id/municipality/GM0727
</pre>
</div>

<p>
The <code>id</code> segment denotes that this identifies an instance resource.
The <code>municipality</code> segments denotes the primary class to which the
instance belongs.  The <code>GM0727</code> segment is currently derived from the
value of the <code>cbscode</code> property.  However, the Amsterdamse code may be
a better choice here?  The JSON source file I used did not contain the
Amsterdamse codes.
</p>

<p>
Using the CBS code property, I cannot mint the resource IRI according
to the above described pattern due to deviating values for the
following municipalities:
</p>

<ul class="org-ul">
<li>Steenbergen
</li>
<li>Wissenkerke
</li>
</ul>

<p>
The values for the above two instances seem to denote different CBS
codes for spelling variations of the municipality.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Properties</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> <code>amsterdamse_code</code></h3>
<div class="outline-text-3" id="text-2-1">
<p>
The values for property <code>amsterdamse_code</code> are always the empty
string, so this property is not yet present in RDF.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> <code>cbs-def:gemeenteCode</code></h3>
<div class="outline-text-3" id="text-2-2">
<p>
The values for property <code>cbscode</code> is &#x2014; with the exception of the
records for ‘Steenbergen’ and ‘Wissenkerke’ &#x2014; the four-digit
identifier as issued by CBS.  I added the prefix <code>GM</code> for each of
these values, because then these values can be directly compared to
CBS data.  CBS uses letter prefixes to distinguish between
municipalities (<code>GM</code>), neighborhoods (<code>BU</code>), and districts (<code>WK</code>).
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> <code>geo:geometry</code></h3>
<div class="outline-text-3" id="text-2-3">
<p>
For geometries we can pack all the information into a single
statement, using Well-Known Text (WKT) for the serialization.  The
following JSON:
</p>

<div class="org-src-container">

<pre class="src src-json">"geometry":{
  "type": "MultiPolygon",
  "coordinates": [[[[6.561637,53.31025],…,[6.561637,53.31025]]]]
}
</pre>
</div>

<p>
is transformed into the following RDF:
</p>

<div class="org-src-container">

<pre class="src src-turtle">geo:geometry "MULTIPOLYGON(((6.561637 53.31025, …, 6.561637 53.31025)))"^^wkt:multiPolygon .
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> <code>gem-def:validSince</code> &amp; <code>gem-def:validUntil</code></h3>
<div class="outline-text-3" id="text-2-4">
<p>
For these properties we use the datatype <code>xsd:gYear</code>, denoting a
Gregorian year.
</p>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> <code>type</code> → <code>rdf:type</code></h3>
<div class="outline-text-3" id="text-2-5">
<p>
For the type property I reuse <code>rdf:type</code>.  I currently distinguish
between municipalities (reusing class <code>cbs-def:Gemeente</code> from the CBS
dataset, and temporal extensions (of municipalities), belonging to the
newly introduced class <code>gem-def:TemporalExtension</code>.
</p>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> <code>name</code> → <code>rdfs:label</code></h3>
<div class="outline-text-3" id="text-2-6">
<p>
For the name property I reuse <code>rdfs:label</code> and specify the language
(<code>@nl</code>).
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Example</h2>
<div class="outline-text-2" id="text-3">
<p>
Here I show the full transformation for ‘Adorp’:
</p>

<div class="org-src-container">

<pre class="src src-json">{
  "name": "Adorp",
  "type": "hg:Municipality",
  "validUntil": "1990",
  "uri": "http://www.gemeentegeschiedenis.nl/gemeentenaam/Adorp",
  "data": {
    "amsterdamse code": "",
    "cbscode": "0001"
  }
}
{
  "id": "Adorp-1812",
  "name": "Adorp",
  "type": "hg:Municipality",
  "geometry":{
    "type": "MultiPolygon",
    "coordinates": [[[[6.561637,53.31025],[6.557453,53.272189],[6.55067,53.259675],[6.558909,53.254023],[6.559183,53.24755],[6.547954,53.247839],[6.543709,53.245993],[6.531656,53.254735],[6.521581,53.253393],[6.531844,53.239187],[6.524014,53.237644],[6.510344,53.247658],[6.509436,53.253058],[6.50562,53.267741],[6.50479,53.276196],[6.501281,53.297076],[6.518449,53.29395],[6.519297,53.297716],[6.507629,53.298904],[6.507703,53.301779],[6.518796,53.301495],[6.522505,53.305594],[6.561637,53.31025]]]]
  },
  "validSince": "1812",
  "validUntil": "1968"
}
{
  "id": "Adorp-1969",
  "name": "Adorp",
  "type": "hg:Municipality",
  "geometry":{
    "type": "MultiPolygon",
    "coordinates": [[[[6.561637,53.31025],[6.557453,53.272189],[6.55067,53.259675],[6.536748,53.260258],[6.539825,53.257623],[6.538697,53.254668],[6.523377,53.253286],[6.509436,53.253058],[6.50562,53.267741],[6.50479,53.276196],[6.501281,53.297076],[6.518449,53.29395],[6.519297,53.297716],[6.507629,53.298904],[6.507703,53.301779],[6.518796,53.301495],[6.522505,53.305594],[6.561637,53.31025]]]]
  },
  "validSince": "1969",
  "validUntil": "1990"
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-turtle">@prefix cbs-def: https://cbs.nl/def/
@prefix gem-def: https://gemeentegeschiedenis.nl/def/
@prefix gem-id: https://gemeentegeschiedenis.nl/id/
@prefix geo: https://triply.cc/geo/
@prefix rdfs: http://www.w3.org/2000/01/rdf-schema#
@prefix wkt: https://triply.cc/wkt/
@prefix xsd: http://www.w3.org/2001/XMLSchema#

gem-id:gemeente/GM0001
  a cbs-def:Gemeente ;
  rdfs:label "Adorp"@nl ;
  rdfs:seeAlso "http://www.gemeentegeschiedenis.nl/gemeentenaam/Adorp"^^xsd:anyURI ;
  cbs-def:gemeenteCode "GM0001" ;
  gem-def:temporalExtension
    gem-id:temporalExtension/0001-1812 ,
    gem-id:temporalExtension/0001-1969 ;
  gem-def:validUntil "1990"^^xsd:gYear .

gem-id:temporalExtension/0001-1812
  a gem-def:TemporalExtension ;
  gem-def:id "Adorp-1812" ;
  gem-def:validSince "1812"^^xsd:gYear ;
  gem-def:validUntil "1968"^^xsd:gYear ;
  geo:geometry "MULTIPOLYGON(((6.561637 53.31025, 6.557453 53.272189, 6.55067 53.259675, 6.558909 53.254023, 6.559183 53.24755, 6.547954 53.247839, 6.543709 53.245993, 6.531656 53.254735, 6.521581 53.253393, 6.531844 53.239187, 6.524014 53.237644, 6.510344 53.247658, 6.509436 53.253058, 6.50562 53.267741, 6.50479 53.276196, 6.501281 53.297076, 6.518449 53.29395, 6.519297 53.297716, 6.507629 53.298904, 6.507703 53.301779, 6.518796 53.301495, 6.522505 53.305594, 6.561637 53.31025)))"^^wkt:multiPolygon .

gem-id:temporalExtension/0001-1969
  a gem-def:TemporalExtension ;
  gem-def:validSince "1969"^^xsd:gYear ;
  gem-def:validUntil "1990"^^xsd:gYear ;
  geo:geometry "MULTIPOLYGON (((6.561637 53.31025, 6.557453 53.272189, 6.55067 53.259675, 6.536748 53.260258, 6.539825 53.257623, 6.538697 53.254668, 6.523377 53.253286, 6.509436 53.253058, 6.50562 53.267741, 6.50479 53.276196, 6.501281 53.297076, 6.518449 53.29395, 6.519297 53.297716, 6.507629 53.298904, 6.507703 53.301779, 6.518796 53.301495, 6.522505 53.305594, 6.561637 53.31025)))"^^wkt:multiPolygon .
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> TO-DO list</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>Include Amsterdamse code.
</li>
<li>Replacements for properties <code>gem-def:validSince</code> and
<code>gem-def:validUntil</code>.
</li>
<li>Replacements for property <code>gem-def:hasTemporalExtension</code> and class
<code>gem-def:TemporalExtension</code>?
</li>
<li>Create a proper datatype for CBS codes.
</li>
<li>Create a linkset linking <code>gem-id:gemeente/GM0001</code> to
<code>cbs-id:gemeente/GM0001</code>.
</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Wouter Beek</p>
<p class="date">Created: 2017-01-28 za 00:32</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.0.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
